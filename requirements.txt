# Tax Extraction System - Railway Deployment (Enhanced)
# Full dependencies for api_public_enhanced.py with optimizations
# All new dependencies are OPTIONAL - the API works without them

# API Framework (REQUIRED)
fastapi==0.109.0
uvicorn[standard]==0.27.0
pydantic==2.5.3
pydantic-settings==2.1.0
python-multipart==0.0.6

# Database Integration - Use exact working versions (REQUIRED)
# IMPORTANT: These versions are specifically chosen for compatibility
# supabase 2.8.1 works with gotrue 2.8.1 which doesn't have the proxy parameter bug
supabase==2.8.1
gotrue==2.8.1  # DO NOT UPGRADE - versions 2.9.0+ have proxy parameter bug with httpx
httpx==0.27.0  # Works with both supabase and gotrue 2.8.1
postgrest==0.17.0  # Required by supabase 2.8.1
realtime==2.0.0  # Required by supabase 2.8.1  
storage3==0.8.0  # Required by supabase 2.8.1
supafunc==0.6.0  # Required by supabase 2.8.1
python-dotenv==1.0.0

# Web Scraping for cloud_extractor (REQUIRED)
beautifulsoup4==4.12.3
lxml==5.1.0
requests==2.31.0

# Data Processing (REQUIRED for existing features)
pandas==2.2.0
openpyxl==3.1.2
xlsxwriter==3.1.9

# Streamlit Dashboard (REQUIRED for dashboard)
streamlit==1.29.0
plotly==5.18.0
numpy==1.26.4

# Error handling and utilities (REQUIRED)
tenacity==8.2.3
pytz==2023.3

# ==========================
# ENHANCED FEATURES (OPTIONAL)
# The API will work without these but with reduced functionality
# ==========================

# Faster JSON serialization (OPTIONAL - fallback to standard json)
orjson==3.9.10

# API rate limiting (OPTIONAL - no rate limiting without it)
slowapi==0.1.9

# Advanced caching (OPTIONAL - basic dict caching without it)
cachetools==5.3.2

# Redis disabled for this deployment
# redis[hiredis]==5.0.1

# Metrics and monitoring (OPTIONAL - no metrics without it)
prometheus-client==0.19.0

# Async file operations (OPTIONAL)
aiofiles==23.2.1

# Enhanced webhook support (OPTIONAL - for webhook notifications)
httpx==0.27.0  # Already included above

# Response compression is built into FastAPI/Starlette
# No additional package needed for GZipMiddleware